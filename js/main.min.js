//@prepros-append pages/common.js
//@prepros-append pages/header.js
//@prepros-append pages/index.js
//@prepros-append pages/mmenu.js
// common.js
function getNumber(str) {
    return parseInt(str.replace(/\s/g, ''));
}

function number_format(number, decimals, dec_point, thousands_sep) {
    var i, j, kw, kd, km;
    if (isNaN(decimals = Math.abs(decimals))) {
        decimals = 2;
    }
    if (dec_point == undefined) {
        dec_point = ",";
    }
    if (thousands_sep == undefined) {
        thousands_sep = ".";
    }
    i = parseInt(number = (+number || 0).toFixed(decimals)) + "";
    if ((j = i.length) > 3) {
        j = j % 3;
    } else {
        j = 0;
    }
    km = (j ? i.substr(0, j) + thousands_sep : "");
    kw = i.substr(j).replace(/(\d{3})(?=\d)/g, "$1" + thousands_sep);
    kd = (decimals ? dec_point + Math.abs(number - i).toFixed(decimals).replace(/-/, 0).slice(2) : "");
    return km + kw + kd;
}

function imageResize(src) {
    $('img').not('.logo__img').attr('src', src);
}
// imageResize('https://loremflickr.com/320/440');

const wWidth = $(window).width();
//header.js
$(function () {

    // VARIABLES
    const wrapper = $('.wrapper'),
        aside = $('.aside'),
        header = $('header.header'),
        headerFixed = $('.header_fixed');

    // EVENTS
    // Фиксированная шапка
    // if (wWidth < 1540) {
    //     addFixedHeader();
    // }

    $(window).on('scroll', function (e) {
        let height = header.outerHeight(),
            scrollTop = $(this).scrollTop();

        if (scrollTop > height) {
            headerFixed.addClass('active');
        } else {
            headerFixed.removeClass('active');
        }

    });
    //Открытие aside
    $('.jsMenuOpen').on('click', function (e) {
        e.preventDefault();
        openMenu();
    });

    //Закрытие aside
    $('body').on('click', function (e) {
        let target = $(e.target);

        if (wWidth<1540){
            if ((target.closest('.mmenu').length == 0 && target.closest('.jsMenuOpen').length == 0) || target.closest('.jSMenuClose').length > 0) {
                closeMenu();
            }
        } else {
            if ((target.closest('.aside').length == 0 && target.closest('.jsMenuOpen').length == 0) || target.closest('.jSMenuClose').length > 0) {
                closeMenu();
            }
        }
    });


    // FUNCTIONS
    function openMenu() {
        if (wWidth < 1540) {
            let menu = $('.mmenu');
            menu.addClass('active');
        } else {
            aside.addClass('active');
        }
    }

    function closeMenu() {
        if (wWidth < 1540) {
            let menu = $('.mmenu');
            menu.removeClass('active');
        } else {
            aside.removeClass('active');
        }
    }

    function addFixedHeader() {
        // debugger;
        // let clone = header.clone();
        // clone.removeClass('header_absolute').addClass('header_fixed');
        // wrapper.append(clone);
    }

    //VENDORS


});
//index.js
$(function () {

// VARIABLES

    // EVENTS

    // FUNCTIONS

    //VENDORS
    const ibanner = document.querySelector('.ibanner__slider');
    if (ibanner) {
        let ibannerSlider = new Swiper('.ibanner__container', {
            slidesPerView: 1,
            effect: 'slide',
            spaceBetween: 10,
            loop: true,
            watchOverflow: true,
            // Navigation arrows
            navigation: {
                nextEl: '.ibanner__next',
                prevEl: '.ibanner__prev',
            },
            // If we need pagination
            pagination: {
                el: '.ibanner__pag',
                clickable: true
            },
        });
    }
    const islider = document.querySelector('.islider');
    if (ibanner) {
        let ibannerSlider = new Swiper('.islider', {
            slidesPerView: 1,
            effect: 'slide',
            loop: true,
            spaceBetween: 0,
            watchOverflow: true,
            autoplay: {
                delay: 5000,
            },
            breakpoints: {
                // when window width is >= 320px
                767.99: {
                    slidesPerView: 2,
                    spaceBetween: 20
                },
                // when window width is >= 1200px
                1199.99: {
                    slidesPerView: 4,
                },
            }
        });
    }



});
//mmenu.js
$(function () {

    // VARIABLES

    // EVENTS
    // Переходм между вкладками
    $('.mmenu__link_arr').on('click', function (e) {
        e.preventDefault();
        let link = $(this),
            wrapper = link.next();

        wrapper.addClass('active');
    });

    //Закрытие вкладки
    $('.jsWrapClose').on('click', function (e) {
        e.preventDefault();
        let btn = $(this),
            wrapper = btn.closest('.mmenu__wrapper');

        wrapper.removeClass('active');
    });

    // Открытие меню
    $('.jsMenuOpen').on('click',function (e) {
        e.preventDefault();
        openMenu();
    });

    //Закрытие меню
    $('body').on('click', function (e) {
        let target = $(e.target);

        if (target.hasClass('mmenu active') || target.closest('.jsMenuClose').length > 0) {
            closeMenu();
        }
    });


    // FUNCTIONS
    // Функция отрытия меню
    function openMenu() {
        let menu = $('.mmenu');
        menu.addClass('active');
        // setOverflow();
    }

    // Функция закрытия меню
    function closeMenu() {
        let menu = $('.mmenu'),
            wrappers = menu.find('.mmenu__wrapper');
        menu.removeClass('active');
        wrappers.removeClass('active');
        // removeOverflow();
    }


    //VENDORS



});

//# sourceMappingURL=main.min.js.map